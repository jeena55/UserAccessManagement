
# Add, Delete, Modify Users and Groups

&nbsp;&nbsp;&nbsp;&nbsp;ในฐานะผู้ดูแลระบบ Linux จำเป็นต้องทราบวิธีเพิ่ม, แก้ไข และลบผู้ใช้ในระบบLinux ซึ่งเป็นการปฏิบัติที่ดีที่จะมีบัญชีที่แตกต่างกันสำหรับผู้ใช้แต่ละคนและตั้งสิทธิ์เพื่อเป็นการป้องกันทางด้านความปลอดภัย


&nbsp;&nbsp;&nbsp;&nbsp;Groups คือกลุ่มของผู้ใช้ การสร้างและการจัดการgroupsเป็นวิธีที่ง่ายที่สุดวิธีหนึ่งในการจัดการกับผู้ใช้หลายรายพร้อมๆกัน โดยเฉพาะอย่างยิ่งเมื่อต้องจัดการกับสิทธิ์ โดยทั่วไปไฟล์ <strong>/etc/group</strong> จะเก็บข้อมูลของกลุ่มและเป็นไฟล์การกำหนดค่าเริ่มต้น

>ผู้ดูแลระบบ Linux ใช้กลุ่มเพื่อกำหนดการเข้าถึงไฟล์และทรัพยากรอื่นๆ ทุกกลุ่มจะมี ID เฉพาะโดยแสดงอยู่ในไฟล์ <strong><em>/etc/group</em></strong> รวมถึงชื่อกลุ่มและสมาชิก กลุ่มแรกที่แสดงอยู่ในไฟล์นี้คือกลุ่มของระบบ เนื่องจากผู้ดูแลการแจกจ่ายกำหนดค่าไว้ล่วงหน้าสำหรับกิจกรรมของระบบ


ผู้ใช้แต่ละรายสามารถอยู่ในกลุ่มหลัก1กลุ่ม และกลุ่มรองได้หลายกลุ่ม หากคุณสร้างผู้ใช้บน Linux โดยใช้คำสั่ง 
- <mark>useradd</mark>

กลุ่มที่มีชื่อเดียวกับชื่อผู้ใช้จะถูกสร้างขึ้นและผู้ใช้จะถูกเพิ่มเป็นสมาชิกของกลุ่มนั้น ๆ กลุ่มนี้คือกลุ่มหลักของผู้ใช้

## Add User

### หากต้องการเพิ่มผู้ใช้ ให้รันคำสั่ง <mark>useradd</mark> ดังนี้:<br>
```bash
sudo useradd -m <name of the user>
```
หากต้องการเพิ่มผู้ใช้โดยให้สร้างโฮมไดเรกทอรี ให้ใช้คำสั่ง <mark>useradd</mark> โดยใช้ <strong>-m</strong>

>ถ้าคำสั่งสำเร็จ จะไม่มีใดๆผลลัพธ์ออกมา

ระบบจะสร้างผู้ใช้โดยอัตโนมัติ โดยการกำหนด ID ผู้ใช้เฉพาะสำหรับผู้ใช้ และเพิ่มรายละเอียดของผู้ใช้ลงในไฟล์ /etc/passwd นอกจากนี้ยังสร้างโฮมไดเร็กตอรี่สำหรับผู้ใช้ภายใต้ <strong>/home/<name of the user\>></strong>

ณ จุดนี้ ผู้ใช้ได้ถูกสร้างขึ้นแล้ว แต่ไม่มีรหัสผ่านและไม่สามารถเข้าสู่ระบบได้ ดังนั้น 

### หากต้องการกำหนดรหัสผ่านให้กับผู้ใช้ที่สร้างขึ้นใหม่ ให้รันคำสั่ง passwd ดังนี้:
```bash
sudo passwd <username>
```
หลังจากนั้น ระบบจะถามคุณให้ป้อนรหัสผ่านสำหรับผู้ใช้ และยืนยันรหัสผ่านอีกครั้ง

>คำสั่งนี้จะเพิ่มรหัสผ่านของผู้ใช้ใน <strong>/etc/shadow</strong> ในรูปแบบที่เข้ารหัส หลังจากรันคำสั่งนี้แล้ว ผู้ใช้ใหม่ควรจะสามารถเข้าสู่ระบบได้ตามปกติ

คุณสามารถดู ID ผู้ใช้ใหม่ได้โดยใช้ 
- <strong>id -u \<username\>.</strong>

## Change Password of a User

ก่อนหน้านี้เมื่อเราสร้างผู้ใช้ใหม่ เราได้ใช้คำสั่ง <strong>passwd</strong> เพื่อกำหนดรหัสผ่านให้กับผู้ใช้ใหม่ คุณเปลี่ยนรหัสผ่านได้ของผู้ใช้ได้โดย:  
```bash
    passwd
```
>เมื่อคุณเปลี่ยนรหัสผ่านของคุณเอง ระบบจะถามรหัสผ่านปัจจุบันของคุณ เมื่อคุณป้อนอย่างถูกต้อง คุณจะถูกขอให้ป้อนรหัสผ่านใหม่สองครั้ง

คุณยังสามารถระบุชื่อผู้ใช้เพื่อเปลี่ยนรหัสของผู้ใช้นั้น แม้ว่าคุณจะต้องรูทเพื่อเปลี่ยนรหัสผ่านให้ผู้อื่นก็ตาม:
```bash
    sudo passwd <username>
```

>เมื่อคุณเป็น root-user คำสั้ง <strong>passwd</strong> จะไม่ถามรหัสผ่านปัจจุบันของคุณ แต่จะถามรหัสผ่านใหม่จากคุณเท่านั้น

คุณยังสามารถใช้ <strong>passwd</strong> เพื่อป้องกันไม่ให้ผู้ใช้เข้าสู่ระบบ (หรือที่เรียกว่า <strong>"ล็อคผู้ใช้"</strong>) โดยใช้ -l ตัวอย่างเช่น หากคุณต้องการป้องกันไม่ให้ sprite เข้าสู่ระบบ คุณสามารถใช้:
```bash
    sudo passwd -l sprite
```

## Grant Sudo Permissions to Users

<mark>sudo</mark>เป็นโปรแกรมอรรถประโยชน์ที่ช่วยให้ผู้ใช้สามารถรันคำสั่งในฐานะผู้ใช้รายอื่น ซึ่งโดยปกติจะเป็น <strong>root-user</strong> มีเพียงผู้ใช้บางกลุ่มเท่านั้นที่สามารถดำเนินการ <mark>sudo</mark>ได้

หากคุณต้องการให้ผู้ใช้ (เช่น sprite) สามารถใช้ <mark>sudo</mark>ได้ คุณสามารถใช้ <strong>usermod</strong>เพื่อเพิ่มพวกเขาเข้าในกลุ่ม <mark>sudo</mark>ได้ดังนี้:
```bash
    sudo usermod -a -G sudo sprite
```

สำหรับ CentOS หรือ RHEL:
```bash
    sudo usermod -a -G wheel sprite
```

จะเป็นอย่างไรถ้าคุณไม่ใช้บางอย่างตามที่ <strong>Debian</strong> หรือ <strong>CentOS</strong> กำหนด แม้ว่าการกำหนดค่า <mark>sudo</mark>เริ่มต้นอาจแตกต่างกันมากในแต่ละรุ่น แต่ขั้นตอนด้านล่างนี้จะช่วยให้คุณเข้าใจได้มากขึ้น

1. ขั้นแรก คุณควรสร้างกลุ่มของคุณเอง เช่น <strong>sysadmins</strong> และเพิ่มผู้ใช้เข้าไป เช่นเดียวกับที่เราเคยทำก่อนหน้านี้ จากนั้นคุณสามารถแก้ไขไฟล์ /etc/sudoers ในฐานะ<strong>root-user</strong>เพื่ออนุญาตให้ใครก็ตามที่เป็น <strong>sysadmins</strong> สามารถเข้าถึง <mark>sudo</mark>ได้ หากต้องการแก้ไขไฟล์ คุณสามารถใช้โปรแกรมแก้ไขเช่น nano หรือ vi ได้โดยการเรียกใช้:
```bash
    sudo nano /etc/sudoders # หากติดตั้ง nano แล้ว
    sudo vi /etc/sudoers # หากติดตั้ง vi แล้ว
```
2. จากนั้นไปที่ท้ายไฟล์แล้วเพิ่มข้อความต่อไปนี้ในบรรทัดของตัวเอง สิ่งนี้จะอนุญาตให้ใครก็ตามที่เป็น<strong>sysadmins</strong>สามารถใช้ <strong>sudo</strong>:
```bash
    %sysadmins ALL=(ALL) ALL
```
3. บันทึกไฟล์และออกจากโปรแกรมแก้ไข หลังจากนี้ ผู้ใช้ใน <strong>sysadmins</strong> จะสามารถใช้ <mark>sudo</mark>เพื่อรันคำสั่งได้

## Delete a User

หากต้องการลบผู้ใช้ใน Linux คุณสามารถใช้คำสั่ง <mark>userdel</mark> ได้ดังนี้:
```bash
    sudo userdel -r <username>
```


## User Groups

Groups คือกลุ่มของผู้ใช้ groups สามารถกำหนดผู้ใช้ได้เป็นศูนย์หรือมากกว่านั้น แต่ละกลุ่มจะมี <strong>“ชื่อกลุ่ม”</strong> และ <strong>“รหัสกลุ่ม”</strong> ที่เป็นเอกลักษณ์ของตัวเอง กลุ่มใช้เพื่อกำหนดสิทธิ์แก่ผู้ใช้, การเข้าถึง หรือสิทธิ์พิเศษ

#### แบ่งเป็น 2 ประเภท คือ

1. <strong>Primary Group:</strong> 
 - เมื่อสร้างผู้ใช้ ระบบจะกำหนดกลุ่มเริ่มต้นกลุ่มเดียวให้ผู้ใช้โดยอัตโนมัติ ซึ่งเรียกว่า "กลุ่มหลัก" โดยปกติแล้ว ชื่อของกลุ่มหลักจะเหมือนกับชื่อผู้ใช้ แต่คุณสามารถเปลี่ยนได้หากต้องการ

2. <strong>Supplementary Group:</strong>
- นอกเหนือจากกลุ่มหลักแล้ว คุณสามารถเพิ่มผู้ใช้ในกลุ่มอื่นๆ ได้ กลุ่มอื่นๆ ที่มีผู้ใช้อยู่เรียกว่ากลุ่มเสริม

>ข้อมูลเกี่ยวกับกลุ่มทั้งหมดในระบบของคุณจะถูกจัดเก็บไว้ใน <strong>/etc/group</strong> กลุ่มยังสามารถมีรหัสผ่านได้ โดยระบบจะจัดเก็บไว้ใน <strong>/etc/gshadow</strong>

## Create a new Group

